/**
 * @file accordion.scss
 * @component Accordion (Molecule)
 * @description Native <details> and <summary> based accordion with smooth
 * animations using the modern ::details-content specification.
 *
 * @section Local Tokens
 * --details-border-color    : Border surrounding the entire component.
 * --summary-bg-color        : Background color of the summary (header) area.
 * --accordion-transition    : Speed and easing for icons and expansion.
 */
details {
  $root: '.accordion';

  // 1. Local variable definitions
  --details-border-color: var(--color-neutral-20, #e5e5e5);
  --details-border-radius: var(--radius-sm, 3px);
  --summary-bg-color: var(--color-neutral-10, #f5f5f5);
  --accordion-transition: 0.3s ease;

  [data-theme="dark"] & {
    --details-border-color: var(--color-neutral-90, #222);
    --summary-bg-color: var(--color-neutral-90, #222);
  }

  // 2. Base styles
  margin-bottom: var(--space-lg);
  border: 1px solid var(--details-border-color);
  border-radius: var(--details-border-radius);
  overflow: hidden;

  // 3. Header (Summary)
  summary {
    padding: var(--space-sm);
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
    background-color: var(--summary-bg-color);
    border-radius: var(--details-border-radius) var(--details-border-radius) 0 0;
    list-style: none;
    margin: 0;

    /* Hide default browser markers */
    &::-webkit-details-marker { display: none; }
    &::-moz-list-bullet { display: none; }

    .icon {
      width: 1.25rem;
      height: 1.25rem;
      transition: transform var(--accordion-transition);
    }
  }

  // 4. Open state behavior
  &[open] {
    summary {
      .icon {
        transform: rotate(180deg);
      }
    }
  }

  // 5. Content area
  #{$root}__content {
    padding: var(--space-sm);

    & > .paragraph:last-child {
      margin-bottom: 0;
    }
  }

  // 6. Modern Animation (supported in modern Chrome/Edge/Safari)
  &::details-content {
    block-size: 0;
    transition:
      block-size var(--accordion-transition),
      content-visibility 0.5s allow-discrete;
  }

  &[open]::details-content {
    block-size: auto;
  }
}
